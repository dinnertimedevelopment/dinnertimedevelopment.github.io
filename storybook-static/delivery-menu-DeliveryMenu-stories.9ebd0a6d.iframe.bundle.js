(self.webpackChunk_dinnertime_react_app=self.webpackChunk_dinnertime_react_app||[]).push([[943],{"../../node_modules/lodash/_apply.js":module=>{module.exports=function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}},"../../node_modules/lodash/_baseFlatten.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayPush=__webpack_require__("../../node_modules/lodash/_arrayPush.js"),isFlattenable=__webpack_require__("../../node_modules/lodash/_isFlattenable.js");module.exports=function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;for(predicate||(predicate=isFlattenable),result||(result=[]);++index<length;){var value=array[index];depth>0&&predicate(value)?depth>1?baseFlatten(value,depth-1,predicate,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}},"../../node_modules/lodash/_baseSetToString.js":(module,__unused_webpack_exports,__webpack_require__)=>{var constant=__webpack_require__("../../node_modules/lodash/constant.js"),defineProperty=__webpack_require__("../../node_modules/lodash/_defineProperty.js"),identity=__webpack_require__("../../node_modules/lodash/identity.js"),baseSetToString=defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:constant(string),writable:!0})}:identity;module.exports=baseSetToString},"../../node_modules/lodash/_baseSlice.js":module=>{module.exports=function baseSlice(array,start,end){var index=-1,length=array.length;start<0&&(start=-start>length?0:length+start),(end=end>length?length:end)<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}},"../../node_modules/lodash/_baseUnset.js":(module,__unused_webpack_exports,__webpack_require__)=>{var castPath=__webpack_require__("../../node_modules/lodash/_castPath.js"),last=__webpack_require__("../../node_modules/lodash/last.js"),parent=__webpack_require__("../../node_modules/lodash/_parent.js"),toKey=__webpack_require__("../../node_modules/lodash/_toKey.js");module.exports=function baseUnset(object,path){return path=castPath(path,object),null==(object=parent(object,path))||delete object[toKey(last(path))]}},"../../node_modules/lodash/_customOmitClone.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isPlainObject=__webpack_require__("../../node_modules/lodash/isPlainObject.js");module.exports=function customOmitClone(value){return isPlainObject(value)?void 0:value}},"../../node_modules/lodash/_flatRest.js":(module,__unused_webpack_exports,__webpack_require__)=>{var flatten=__webpack_require__("../../node_modules/lodash/flatten.js"),overRest=__webpack_require__("../../node_modules/lodash/_overRest.js"),setToString=__webpack_require__("../../node_modules/lodash/_setToString.js");module.exports=function flatRest(func){return setToString(overRest(func,void 0,flatten),func+"")}},"../../node_modules/lodash/_isFlattenable.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Symbol=__webpack_require__("../../node_modules/lodash/_Symbol.js"),isArguments=__webpack_require__("../../node_modules/lodash/isArguments.js"),isArray=__webpack_require__("../../node_modules/lodash/isArray.js"),spreadableSymbol=Symbol?Symbol.isConcatSpreadable:void 0;module.exports=function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}},"../../node_modules/lodash/_overRest.js":(module,__unused_webpack_exports,__webpack_require__)=>{var apply=__webpack_require__("../../node_modules/lodash/_apply.js"),nativeMax=Math.max;module.exports=function overRest(func,start,transform){return start=nativeMax(void 0===start?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),apply(func,this,otherArgs)}}},"../../node_modules/lodash/_parent.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGet=__webpack_require__("../../node_modules/lodash/_baseGet.js"),baseSlice=__webpack_require__("../../node_modules/lodash/_baseSlice.js");module.exports=function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}},"../../node_modules/lodash/_setToString.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseSetToString=__webpack_require__("../../node_modules/lodash/_baseSetToString.js"),setToString=__webpack_require__("../../node_modules/lodash/_shortOut.js")(baseSetToString);module.exports=setToString},"../../node_modules/lodash/_shortOut.js":module=>{var nativeNow=Date.now;module.exports=function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=16-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=800)return arguments[0]}else count=0;return func.apply(void 0,arguments)}}},"../../node_modules/lodash/constant.js":module=>{module.exports=function constant(value){return function(){return value}}},"../../node_modules/lodash/flatten.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseFlatten=__webpack_require__("../../node_modules/lodash/_baseFlatten.js");module.exports=function flatten(array){return(null==array?0:array.length)?baseFlatten(array,1):[]}},"../../node_modules/lodash/last.js":module=>{module.exports=function last(array){var length=null==array?0:array.length;return length?array[length-1]:void 0}},"../../node_modules/lodash/omit.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayMap=__webpack_require__("../../node_modules/lodash/_arrayMap.js"),baseClone=__webpack_require__("../../node_modules/lodash/_baseClone.js"),baseUnset=__webpack_require__("../../node_modules/lodash/_baseUnset.js"),castPath=__webpack_require__("../../node_modules/lodash/_castPath.js"),copyObject=__webpack_require__("../../node_modules/lodash/_copyObject.js"),customOmitClone=__webpack_require__("../../node_modules/lodash/_customOmitClone.js"),flatRest=__webpack_require__("../../node_modules/lodash/_flatRest.js"),getAllKeysIn=__webpack_require__("../../node_modules/lodash/_getAllKeysIn.js"),omit=flatRest((function(object,paths){var result={};if(null==object)return result;var isDeep=!1;paths=arrayMap(paths,(function(path){return path=castPath(path,object),isDeep||(isDeep=path.length>1),path})),copyObject(object,getAllKeysIn(object),result),isDeep&&(result=baseClone(result,7,customOmitClone));for(var length=paths.length;length--;)baseUnset(result,paths[length]);return result}));module.exports=omit},"./src/components/delivery/DeliveryMenu.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Q:()=>DeliveryMenuInterleavedSubs,Y:()=>DeliveryMenu});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/next/dist/compiled/react/index.js"),_services_logging__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/services/logging/index.ts"),_Substitutions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/delivery/Substitutions.tsx"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement,INSTACART_DISPLAY_NAME="Instacart";function DeliveryMenu(props){var items=props.items,service=props.service,displayServiceName=INSTACART_DISPLAY_NAME;(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){"instacart"!==service&&_services_logging__WEBPACK_IMPORTED_MODULE_1__.v.warn({},"warning, delivery '%s' service is not supported",service)}),[service]);var nIngredientsWithSubs=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return items.reduce((function(acc,item){return item.substituteIngredient?acc+1:acc}),0)}),[items]),_useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),substituteIngIds=_useState[0],setSubstituteIngIds=_useState[1],substitutionUI=nIngredientsWithSubs>0?__jsx(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,__jsx("p",null,"The following ingredients have substitutions. Pick which item you prefer to purchase."),__jsx(_Substitutions__WEBPACK_IMPORTED_MODULE_2__.T,{shoppingListItems:items,itemIdsToSub:substituteIngIds,onSetItemIdsToSub:setSubstituteIngIds})):__jsx(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null);return __jsx(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,__jsx("section",null,__jsx("h3",null,"Deliver with ",displayServiceName),__jsx("div",{className:"substitutions"},substitutionUI),__jsx("div",{className:"list-preview"},__jsx("h4",null,"Your shopping list"),__jsx("ul",null,items.map((function(item){return __jsx("li",{key:item.id},item.name)}))))))}function DeliveryMenuInterleavedSubs(props){var items=props.items,service=props.service,displayServiceName=INSTACART_DISPLAY_NAME;(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){"instacart"!==service&&_services_logging__WEBPACK_IMPORTED_MODULE_1__.v.warn({},"warning, delivery '%s' service is not supported",service)}),[service]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return items.reduce((function(acc,item){return item.substituteIngredient?acc+1:acc}),0)}),[items]);var _useState2=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Set),substituteIngIds=_useState2[0],setSubstituteIngIds=_useState2[1];return __jsx(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,__jsx("section",null,__jsx("h3",null,"Deliver with ",displayServiceName),__jsx("div",{className:"list-preview"},__jsx("h4",null,"Your shopping list"),__jsx("ul",null,items.map((function(item){return item.substituteIngredient?__jsx("li",{key:item.id},__jsx(_Substitutions__WEBPACK_IMPORTED_MODULE_2__.i,{shoppingListItem:item,isSubstituted:substituteIngIds.has(item.id),onSetIsSubstituted:function onSetIsSubstituted(value){return function setItemIsSubstitute(itemId,value){var copy=new Set(substituteIngIds);value?copy.add(itemId):copy.delete(itemId),setSubstituteIngIds(copy)}(item.id,value)}})):__jsx("li",{key:item.id},item.name)}))))))}try{DeliveryMenu.displayName="DeliveryMenu",DeliveryMenu.__docgenInfo={description:"",displayName:"DeliveryMenu",props:{service:{defaultValue:null,description:"",name:"service",required:!0,type:{name:'"instacart"'}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"ShoppingListItem[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/delivery/DeliveryMenu.tsx#DeliveryMenu"]={docgenInfo:DeliveryMenu.__docgenInfo,name:"DeliveryMenu",path:"src/components/delivery/DeliveryMenu.tsx#DeliveryMenu"})}catch(__react_docgen_typescript_loader_error){}try{DeliveryMenuInterleavedSubs.displayName="DeliveryMenuInterleavedSubs",DeliveryMenuInterleavedSubs.__docgenInfo={description:"",displayName:"DeliveryMenuInterleavedSubs",props:{service:{defaultValue:null,description:"",name:"service",required:!0,type:{name:'"instacart"'}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"ShoppingListItem[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/delivery/DeliveryMenu.tsx#DeliveryMenuInterleavedSubs"]={docgenInfo:DeliveryMenuInterleavedSubs.__docgenInfo,name:"DeliveryMenuInterleavedSubs",path:"src/components/delivery/DeliveryMenu.tsx#DeliveryMenuInterleavedSubs"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/delivery/Substitutions.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>Substitutions,i:()=>SingleSubstitution});var _templateObject,_home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/next/dist/compiled/react/index.js"),_base_card__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/base/card/index.ts"),_base_text__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/base/text/index.ts"),styled_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),_emotion_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@emotion/react/dist/emotion-element-f0de968e.browser.esm.js"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement,BaseFlex=styled_components__WEBPACK_IMPORTED_MODULE_3__.Ay.li(_templateObject||(_templateObject=(0,_home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_4__.A)(["\n  display: flex;\n  & > * {\n    padding: 0.25em;\n    width: 100%;\n  }\n"])));function Substitutions(_ref){var shoppingListItems=_ref.shoppingListItems,baseItemIdsToSub=_ref.itemIdsToSub,onSetItemIdsToSub=_ref.onSetItemIdsToSub,substituteItems=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return shoppingListItems.filter((function(x){return!!x.substituteIngredient}))}),[shoppingListItems]),itemIdsToSub=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return new Set(baseItemIdsToSub)}),[baseItemIdsToSub]);return __jsx(_base_card__WEBPACK_IMPORTED_MODULE_1__.Z,null,__jsx("ul",null,substituteItems.map((function(item){return __jsx(SingleSubstitution,{key:item.id,isSubstituted:itemIdsToSub.has(item.id),onSetIsSubstituted:function onSetIsSubstituted(value){return function setItemToSub(itemId,value){var coppied=new Set(itemIdsToSub);value?coppied.add(itemId):coppied.delete(itemId),onSetItemIdsToSub(Array.from(coppied))}(item.id,value)},shoppingListItem:item})}))))}function SingleSubstitution(_ref2){var _item$substituteIngre,isSubstituted=_ref2.isSubstituted,onSetIsSubstituted=_ref2.onSetIsSubstituted,item=_ref2.shoppingListItem,selectedProps={backgroundColor:(0,_emotion_react__WEBPACK_IMPORTED_MODULE_5__.u)().colors.brand},notSelectedProps={onClick:function toggle(){onSetIsSubstituted(!isSubstituted)}};return __jsx(BaseFlex,{key:item.id},__jsx(_base_text__WEBPACK_IMPORTED_MODULE_2__.EY,isSubstituted?notSelectedProps:selectedProps,item.name),__jsx(_base_text__WEBPACK_IMPORTED_MODULE_2__.EY,null,"OR Substitute for"),__jsx(_base_text__WEBPACK_IMPORTED_MODULE_2__.EY,null,__jsx("button",isSubstituted?selectedProps:notSelectedProps," ",null===(_item$substituteIngre=item.substituteIngredient)||void 0===_item$substituteIngre?void 0:_item$substituteIngre.displayName)))}Substitutions.displayName="Substitutions",SingleSubstitution.displayName="SingleSubstitution";try{Substitutions.displayName="Substitutions",Substitutions.__docgenInfo={description:"UI for picking substitutions in a shopping list. Given a full shopping list,\nit displays items with an availible substitute. State is managed by itemIdsToSub\nand setItemIdsToSub, which is simply a list of shopping trip ids where the substitute\nis preferred.",displayName:"Substitutions",props:{shoppingListItems:{defaultValue:null,description:"",name:"shoppingListItems",required:!0,type:{name:"ShoppingListItem[]"}},itemIdsToSub:{defaultValue:null,description:"",name:"itemIdsToSub",required:!0,type:{name:"number[]"}},onSetItemIdsToSub:{defaultValue:null,description:"",name:"onSetItemIdsToSub",required:!0,type:{name:"(value: number[]) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/delivery/Substitutions.tsx#Substitutions"]={docgenInfo:Substitutions.__docgenInfo,name:"Substitutions",path:"src/components/delivery/Substitutions.tsx#Substitutions"})}catch(__react_docgen_typescript_loader_error){}try{SingleSubstitution.displayName="SingleSubstitution",SingleSubstitution.__docgenInfo={description:"",displayName:"SingleSubstitution",props:{shoppingListItem:{defaultValue:null,description:"",name:"shoppingListItem",required:!0,type:{name:"ShoppingListItem"}},isSubstituted:{defaultValue:null,description:"",name:"isSubstituted",required:!0,type:{name:"boolean"}},onSetIsSubstituted:{defaultValue:null,description:"",name:"onSetIsSubstituted",required:!0,type:{name:"(value: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/delivery/Substitutions.tsx#SingleSubstitution"]={docgenInfo:SingleSubstitution.__docgenInfo,name:"SingleSubstitution",path:"src/components/delivery/Substitutions.tsx#SingleSubstitution"})}catch(__react_docgen_typescript_loader_error){}},"./src/stories/delivery/menu/DeliveryMenu.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_components_delivery_DeliveryMenu__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/delivery/DeliveryMenu.tsx"),_utils_storybook__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/utils/storybook.tsx"),_api_client_data_objects_shopping_list_item__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/api-client/data-objects/shopping-list-item.ts"),_sample_items_json__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/stories/delivery/sample_items.json");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}_sample_items_json__WEBPACK_IMPORTED_MODULE_4__.J[1].quantity=1;var shoppingListItems=_sample_items_json__WEBPACK_IMPORTED_MODULE_4__.J.map((function(x){return(0,_api_client_data_objects_shopping_list_item__WEBPACK_IMPORTED_MODULE_3__.o)(x)}));const __WEBPACK_DEFAULT_EXPORT__={component:_components_delivery_DeliveryMenu__WEBPACK_IMPORTED_MODULE_1__.Y,args:{items:shoppingListItems,service:"instacart"},decorators:[(0,_utils_storybook__WEBPACK_IMPORTED_MODULE_2__.IB)(),(0,_utils_storybook__WEBPACK_IMPORTED_MODULE_2__.ru)()],parameters:{docs:{description:{component:"This is the delivery submission component with substitution items\nas a separate section. An alternate implementation to the DeliveryMenuInterleavedSubs"}}}};var Primary={args:function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,_home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},(0,_utils_storybook__WEBPACK_IMPORTED_MODULE_2__.r9)())};Primary.parameters={...Primary.parameters,docs:{...Primary.parameters?.docs,source:{originalSource:"{\n  args: {\n    ...isAuthenticatedArgs()\n  } as Args\n}",...Primary.parameters?.docs?.source}}};const __namedExportsOrder=["Primary"]}}]);