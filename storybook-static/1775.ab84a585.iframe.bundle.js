"use strict";(self.webpackChunk_dinnertime_react_app=self.webpackChunk_dinnertime_react_app||[]).push([[1775],{"./src/components/delivery/InstacartHealthCodeTooltip.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{AW:()=>DisplayHealthCode});var esm_extends=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/extends.js"),objectWithoutProperties=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),defineProperty=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),use_instacart_health_codes=__webpack_require__("./src/hooks/queries/use-instacart-health-codes.ts"),instacart=__webpack_require__("./src/hooks/mutations/instacart.ts"),flex=(__webpack_require__("./src/hooks/use-household.ts"),__webpack_require__("./src/components/base/flex/index.ts")),shopping_list_store=__webpack_require__("./src/store/shopping-list-store.ts"),react=__webpack_require__("../../node_modules/next/dist/compiled/react/index.js"),format_date=__webpack_require__("./src/utils/format-date.ts"),constants=__webpack_require__("../../node_modules/date-fns/esm/constants/index.js"),requiredArgs=__webpack_require__("../../node_modules/date-fns/esm/_lib/requiredArgs/index.js"),toInteger=__webpack_require__("../../node_modules/date-fns/esm/_lib/toInteger/index.js");function parseISO(argument,options){var _options$additionalDi;(0,requiredArgs.A)(1,arguments);var additionalDigits=(0,toInteger.A)(null!==(_options$additionalDi=null==options?void 0:options.additionalDigits)&&void 0!==_options$additionalDi?_options$additionalDi:2);if(2!==additionalDigits&&1!==additionalDigits&&0!==additionalDigits)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof argument&&"[object String]"!==Object.prototype.toString.call(argument))return new Date(NaN);var date,dateStrings=function splitDateString(dateString){var timeString,dateStrings={},array=dateString.split(patterns.dateTimeDelimiter);if(array.length>2)return dateStrings;/:/.test(array[0])?timeString=array[0]:(dateStrings.date=array[0],timeString=array[1],patterns.timeZoneDelimiter.test(dateStrings.date)&&(dateStrings.date=dateString.split(patterns.timeZoneDelimiter)[0],timeString=dateString.substr(dateStrings.date.length,dateString.length)));if(timeString){var token=patterns.timezone.exec(timeString);token?(dateStrings.time=timeString.replace(token[1],""),dateStrings.timezone=token[1]):dateStrings.time=timeString}return dateStrings}(argument);if(dateStrings.date){var parseYearResult=function parseYear(dateString,additionalDigits){var regex=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+additionalDigits)+"})|(\\d{2}|[+-]\\d{"+(2+additionalDigits)+"})$)"),captures=dateString.match(regex);if(!captures)return{year:NaN,restDateString:""};var year=captures[1]?parseInt(captures[1]):null,century=captures[2]?parseInt(captures[2]):null;return{year:null===century?year:100*century,restDateString:dateString.slice((captures[1]||captures[2]).length)}}(dateStrings.date,additionalDigits);date=function parseDate(dateString,year){if(null===year)return new Date(NaN);var captures=dateString.match(dateRegex);if(!captures)return new Date(NaN);var isWeekDate=!!captures[4],dayOfYear=parseDateUnit(captures[1]),month=parseDateUnit(captures[2])-1,day=parseDateUnit(captures[3]),week=parseDateUnit(captures[4]),dayOfWeek=parseDateUnit(captures[5])-1;if(isWeekDate)return function validateWeekDate(_year,week,day){return week>=1&&week<=53&&day>=0&&day<=6}(0,week,dayOfWeek)?function dayOfISOWeekYear(isoWeekYear,week,day){var date=new Date(0);date.setUTCFullYear(isoWeekYear,0,4);var fourthOfJanuaryDay=date.getUTCDay()||7,diff=7*(week-1)+day+1-fourthOfJanuaryDay;return date.setUTCDate(date.getUTCDate()+diff),date}(year,week,dayOfWeek):new Date(NaN);var date=new Date(0);return function validateDate(year,month,date){return month>=0&&month<=11&&date>=1&&date<=(daysInMonths[month]||(isLeapYearIndex(year)?29:28))}(year,month,day)&&function validateDayOfYearDate(year,dayOfYear){return dayOfYear>=1&&dayOfYear<=(isLeapYearIndex(year)?366:365)}(year,dayOfYear)?(date.setUTCFullYear(year,month,Math.max(dayOfYear,day)),date):new Date(NaN)}(parseYearResult.restDateString,parseYearResult.year)}if(!date||isNaN(date.getTime()))return new Date(NaN);var offset,timestamp=date.getTime(),time=0;if(dateStrings.time&&(time=function parseTime(timeString){var captures=timeString.match(timeRegex);if(!captures)return NaN;var hours=parseTimeUnit(captures[1]),minutes=parseTimeUnit(captures[2]),seconds=parseTimeUnit(captures[3]);if(!function validateTime(hours,minutes,seconds){if(24===hours)return 0===minutes&&0===seconds;return seconds>=0&&seconds<60&&minutes>=0&&minutes<60&&hours>=0&&hours<25}(hours,minutes,seconds))return NaN;return hours*constants.s0+minutes*constants.Cg+1e3*seconds}(dateStrings.time),isNaN(time)))return new Date(NaN);if(!dateStrings.timezone){var dirtyDate=new Date(timestamp+time),result=new Date(0);return result.setFullYear(dirtyDate.getUTCFullYear(),dirtyDate.getUTCMonth(),dirtyDate.getUTCDate()),result.setHours(dirtyDate.getUTCHours(),dirtyDate.getUTCMinutes(),dirtyDate.getUTCSeconds(),dirtyDate.getUTCMilliseconds()),result}return offset=function parseTimezone(timezoneString){if("Z"===timezoneString)return 0;var captures=timezoneString.match(timezoneRegex);if(!captures)return 0;var sign="+"===captures[1]?-1:1,hours=parseInt(captures[2]),minutes=captures[3]&&parseInt(captures[3])||0;if(!function validateTimezone(_hours,minutes){return minutes>=0&&minutes<=59}(0,minutes))return NaN;return sign*(hours*constants.s0+minutes*constants.Cg)}(dateStrings.timezone),isNaN(offset)?new Date(NaN):new Date(timestamp+time+offset)}var patterns={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},dateRegex=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,timeRegex=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,timezoneRegex=/^([+-])(\d{2})(?::?(\d{2}))?$/;function parseDateUnit(value){return value?parseInt(value):1}function parseTimeUnit(value){return value&&parseFloat(value.replace(",","."))||0}var daysInMonths=[31,null,31,30,31,30,31,31,30,31,30,31];function isLeapYearIndex(year){return year%400==0||year%4==0&&year%100!=0}var emotion_styled_browser_esm=__webpack_require__("../../node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),buttons=__webpack_require__("./src/components/base/buttons/index.ts"),text_link=__webpack_require__("./src/components/base/text-link/index.ts"),typography=__webpack_require__("./src/constants/typography.ts"),_excluded=["code","key","showDetails","onChangeCode","onCodeCopied"],__jsx=react.createElement,StyledList=(0,emotion_styled_browser_esm.A)("ul")((function(_ref){_ref.theme;return{"& > li":{listStyle:"none !important"}}})),CodeDetailsList=(0,emotion_styled_browser_esm.A)("ul")((function(_ref2){_ref2.theme;return{display:"flex",flexDirection:"column","& li":{marginLeft:"1rem",listStyle:"none"},"& .detail-key":{paddingRight:".75em"}}})),HealthCodeViewRow=(0,emotion_styled_browser_esm.A)(flex.s)((function(_ref3){var theme=_ref3.theme;return(0,defineProperty.A)((0,defineProperty.A)((0,defineProperty.A)({justifyContent:"space-between",flexDirection:"column"},theme.mediaQueries.m,{flexDirection:"row"}),"& .health-code-input",{flex:"2 1 2rem",maxWidth:"10rem"}),"& .health-code-button",{flex:"1 0 2rem",maxWidth:theme.space["10xl"]})})),HealthCodeButton=(0,emotion_styled_browser_esm.A)(buttons.$n)((function(_ref5){return{minWidth:_ref5.theme.space["10xl"]}})),HealthCodeRedeemLink=(0,emotion_styled_browser_esm.A)(text_link.Yq)((function(_ref6){var theme=_ref6.theme;return{borderWidth:"0",fontSize:"3xs",fontWeight:"400",lineHeight:"s",fontFamily:typography.t,cursor:"pointer",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",textDecoration:"none",borderStyle:"solid",position:"relative",outline:"none",border:"none",backgroundColor:theme.colors.primary250,color:theme.colors.white,borderRadius:theme.radii["2xs"],padding:theme.space.xs}}));function InstacartHealthCodeList(_ref7){_ref7.household;var deliveryStatus=(0,shopping_list_store.D)((function(x){return x.deliveryStatus})),_useInstacartHealthCo=(0,use_instacart_health_codes.L2)(),isLoading=_useInstacartHealthCo.isLoading,isSuccess=_useInstacartHealthCo.isSuccess,codes=_useInstacartHealthCo.data;return"unsent"===deliveryStatus?__jsx(react.Fragment,null):isSuccess&&codes.count>0?__jsx("div",null,__jsx(StyledList,{"data-testid":"instacart-styled-list"},codes.results.map((function(code){return __jsx(DisplayHealthCode,{code,key:code.id})})))):isLoading?__jsx("div",null,"Loading"):__jsx(react.Fragment,null)}function DisplayHealthCode(_ref8){var buttonContent,code=_ref8.code,key=_ref8.key,_ref8$showDetails=_ref8.showDetails,showDetails=void 0!==_ref8$showDetails&&_ref8$showDetails,_ref8$onCodeCopied=(_ref8.onChangeCode,_ref8.onCodeCopied),onCodeCopied=void 0===_ref8$onCodeCopied?function(code){}:_ref8$onCodeCopied,props=(0,objectWithoutProperties.A)(_ref8,_excluded),redeemCodeUrl=(0,react.useMemo)((function(){return function getRedeemCodeLink(code){if(!code.redeem_code_url)return"";var params=new URLSearchParams({"health-code-id":code.id});return"/api/redeem-health-code?".concat(params.toString())}(code)}),[code]),_useRequestInstacartH=(0,instacart.X$)(),mutate=_useRequestInstacartH.mutate,mutationLoading=(_useRequestInstacartH.mutateAsync,_useRequestInstacartH.isLoading),copyCode=(0,react.useCallback)((function(){navigator.clipboard.writeText(code.code),onCodeCopied(code)}),[code.code]);return buttonContent=function hasReferralURL(code){return!!code.redeem_code_url}(code)?__jsx(HealthCodeRedeemLink,{href:redeemCodeUrl,target:"_blank",rel:"noopener noreferrer",onClick:function onClick(){return onCodeCopied(code)}},"Redeem your Fresh Funds"):code.code_requested?__jsx(HealthCodeButton,{size:"small",className:"health-code-button",onClick:copyCode},"Copy"):__jsx(HealthCodeButton,{className:"health-code-button",size:"small",onClick:function onClick(){mutationLoading||mutate({code,isCodeRequested:!0})},disabled:mutationLoading},"Get your Code"),__jsx("li",(0,esm_extends.A)({className:"health-code-li",role:"listitem",key:null!=key?key:code.id},props),__jsx(HealthCodeLiContent,{code,showDetails,buttonContent}))}DisplayHealthCode.displayName="DisplayHealthCode";var DATE_FORMAT="MMM do, yyyy";function HealthCodeLiContent(_ref9){var code=_ref9.code,showDetails=_ref9.showDetails,buttonContent=_ref9.buttonContent,expireDate=(0,react.useMemo)((function(){return code.expire_date?(0,format_date.Yq)(parseISO(code.expire_date),DATE_FORMAT):"None"}),[code.expire_date]),receivedDate=(0,react.useMemo)((function(){return code.received_date?(0,format_date.Yq)(parseISO(code.received_date),DATE_FORMAT):"None"}),[code.received_date]);return showDetails?__jsx("div",null,__jsx(HealthCodeViewRow,null,__jsx("input",{className:"health-code-input",type:"text",name:"code-".concat(code.id),id:"code-".concat(code.id),value:code.code,disabled:!0}),buttonContent),__jsx(CodeDetailsList,null,__jsx("li",null,__jsx("span",{className:"detail-key"},"Received On:"),__jsx("span",{className:"detail-val"},receivedDate)),__jsx("li",null,__jsx("span",{className:"detail-key"},"Expiration Date:"),__jsx("span",{className:"detail-val"},expireDate)))):__jsx("div",null,__jsx(HealthCodeViewRow,null,__jsx("input",{className:"health-code-input",type:"text",name:"code-".concat(code.id),id:"code-".concat(code.id),value:code.code,disabled:!0}),buttonContent))}try{InstacartHealthCodeList.displayName="InstacartHealthCodeList",InstacartHealthCodeList.__docgenInfo={description:"",displayName:"InstacartHealthCodeList",props:{household:{defaultValue:null,description:"",name:"household",required:!0,type:{name:"Household"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/delivery/InstacartHealthCodeTooltip.tsx#InstacartHealthCodeList"]={docgenInfo:InstacartHealthCodeList.__docgenInfo,name:"InstacartHealthCodeList",path:"src/components/delivery/InstacartHealthCodeTooltip.tsx#InstacartHealthCodeList"})}catch(__react_docgen_typescript_loader_error){}try{DisplayHealthCode.displayName="DisplayHealthCode",DisplayHealthCode.__docgenInfo={description:"",displayName:"DisplayHealthCode",props:{code:{defaultValue:null,description:"",name:"code",required:!0,type:{name:"InstacartHealthCodeSchema"}},showDetails:{defaultValue:{value:"false"},description:"",name:"showDetails",required:!1,type:{name:"boolean"}},onChangeCode:{defaultValue:{value:"(code: InstacartHealthCodeSchema) => {}"},description:"",name:"onChangeCode",required:!1,type:{name:"((code: InstacartHealthCodeSchema) => void)"}},onCodeCopied:{defaultValue:{value:"(code: InstacartHealthCodeSchema) => {}"},description:"",name:"onCodeCopied",required:!1,type:{name:"((code: InstacartHealthCodeSchema) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/delivery/InstacartHealthCodeTooltip.tsx#DisplayHealthCode"]={docgenInfo:DisplayHealthCode.__docgenInfo,name:"DisplayHealthCode",path:"src/components/delivery/InstacartHealthCodeTooltip.tsx#DisplayHealthCode"})}catch(__react_docgen_typescript_loader_error){}},"./src/hooks/mutations/instacart.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X$:()=>useRequestInstacartHealthCode});var defineProperty=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),asyncToGenerator=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),regenerator=__webpack_require__("../../node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),api_auth=__webpack_require__("./src/context/api-auth/index.ts"),QueryClientProvider=__webpack_require__("../../node_modules/@tanstack/react-query/build/lib/QueryClientProvider.mjs"),react=__webpack_require__("../../node_modules/next/dist/compiled/react/index.js"),utils=__webpack_require__("../../node_modules/@tanstack/query-core/build/lib/utils.mjs"),mutation=__webpack_require__("../../node_modules/@tanstack/query-core/build/lib/mutation.mjs"),notifyManager=__webpack_require__("../../node_modules/@tanstack/query-core/build/lib/notifyManager.mjs"),subscribable=__webpack_require__("../../node_modules/@tanstack/query-core/build/lib/subscribable.mjs");class MutationObserver extends subscribable.Q{constructor(client,options){super(),this.client=client,this.setOptions(options),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(options){var _this$currentMutation;const prevOptions=this.options;this.options=this.client.defaultMutationOptions(options),(0,utils.f8)(prevOptions,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(_this$currentMutation=this.currentMutation)||_this$currentMutation.setOptions(this.options)}onUnsubscribe(){var _this$currentMutation2;this.hasListeners()||(null==(_this$currentMutation2=this.currentMutation)||_this$currentMutation2.removeObserver(this))}onMutationUpdate(action){this.updateResult();const notifyOptions={listeners:!0};"success"===action.type?notifyOptions.onSuccess=!0:"error"===action.type&&(notifyOptions.onError=!0),this.notify(notifyOptions)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(variables,options){return this.mutateOptions=options,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==variables?variables:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const state=this.currentMutation?this.currentMutation.state:(0,mutation.$)(),result={...state,isLoading:"loading"===state.status,isSuccess:"success"===state.status,isError:"error"===state.status,isIdle:"idle"===state.status,mutate:this.mutate,reset:this.reset};this.currentResult=result}notify(options){notifyManager.j.batch((()=>{var _this$mutateOptions$o,_this$mutateOptions,_this$mutateOptions$o2,_this$mutateOptions2;if(this.mutateOptions&&this.hasListeners())if(options.onSuccess)null==(_this$mutateOptions$o=(_this$mutateOptions=this.mutateOptions).onSuccess)||_this$mutateOptions$o.call(_this$mutateOptions,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(_this$mutateOptions$o2=(_this$mutateOptions2=this.mutateOptions).onSettled)||_this$mutateOptions$o2.call(_this$mutateOptions2,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(options.onError){var _this$mutateOptions$o3,_this$mutateOptions3,_this$mutateOptions$o4,_this$mutateOptions4;null==(_this$mutateOptions$o3=(_this$mutateOptions3=this.mutateOptions).onError)||_this$mutateOptions$o3.call(_this$mutateOptions3,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(_this$mutateOptions$o4=(_this$mutateOptions4=this.mutateOptions).onSettled)||_this$mutateOptions$o4.call(_this$mutateOptions4,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}options.listeners&&this.listeners.forEach((({listener})=>{listener(this.currentResult)}))}))}}var useSyncExternalStore=__webpack_require__("../../node_modules/@tanstack/react-query/build/lib/useSyncExternalStore.mjs"),lib_utils=__webpack_require__("../../node_modules/@tanstack/react-query/build/lib/utils.mjs");function noop(){}var esm=__webpack_require__("../../node_modules/zod/dist/esm/index.js"),use_instacart_health_codes_fns=__webpack_require__("./src/hooks/queries/use-instacart-health-codes-fns.ts");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var positiveIntSchema=function positiveIntSchema(){return esm.z.number().min(1).int()};esm.z.object({recipeId:positiveIntSchema(),servings:positiveIntSchema().optional().nullable(),substituteIngredientIds:positiveIntSchema().optional().nullable()}).transform((function(body){return{recipe_id:body.recipeId,servings:body.servings,substitute_ingredient_ids:body.substituteIngredientIds}})),esm.z.object({shoppingTripId:positiveIntSchema(),substituteIngredientIds:esm.z.array(positiveIntSchema()).optional().nullable(),alreadyHave:esm.z.array(positiveIntSchema()).optional().nullable()}).transform((function(body){var _body$alreadyHave,_body$substituteIngre;return{shoppingtrip_id:body.shoppingTripId,already_have:null!==(_body$alreadyHave=body.alreadyHave)&&void 0!==_body$alreadyHave?_body$alreadyHave:void 0,substitute_ingredient_ids:null!==(_body$substituteIngre=body.substituteIngredientIds)&&void 0!==_body$substituteIngre?_body$substituteIngre:void 0}}));function useRequestInstacartHealthCode(){var _mutationFn,_useAuthenticatedAxio2=(0,api_auth.rU)(),axios=_useAuthenticatedAxio2.axios,qc=(_useAuthenticatedAxio2.isAuthenticated,(0,QueryClientProvider.jE)());return function useMutation_useMutation(arg1,arg2,arg3){const options=(0,utils.GR)(arg1,arg2,arg3),queryClient=(0,QueryClientProvider.jE)({context:options.context}),[observer]=react.useState((()=>new MutationObserver(queryClient,options)));react.useEffect((()=>{observer.setOptions(options)}),[observer,options]);const result=(0,useSyncExternalStore.r)(react.useCallback((onStoreChange=>observer.subscribe(notifyManager.j.batchCalls(onStoreChange))),[observer]),(()=>observer.getCurrentResult()),(()=>observer.getCurrentResult())),mutate=react.useCallback(((variables,mutateOptions)=>{observer.mutate(variables,mutateOptions).catch(noop)}),[observer]);if(result.error&&(0,lib_utils.G)(observer.options.useErrorBoundary,[result.error]))throw result.error;return{...result,mutate,mutateAsync:result.mutate}}({mutationFn:(_mutationFn=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee2(_ref2){var code,isCodeRequested,resp;return regenerator_default().wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return code=_ref2.code,isCodeRequested=_ref2.isCodeRequested,_context2.next=1,axios.patch("/api/v2/instacart-health-codes/".concat(code.id,"/"),{code_requested:isCodeRequested});case 1:return resp=_context2.sent,_context2.abrupt("return",resp.data);case 2:case"end":return _context2.stop()}}),_callee2)}))),function mutationFn(_x2){return _mutationFn.apply(this,arguments)}),onSuccess:function onSuccess(data){for(var _qc$getQueryData,query=null!==(_qc$getQueryData=qc.getQueryData([use_instacart_health_codes_fns.ct]))&&void 0!==_qc$getQueryData?_qc$getQueryData:{count:0,results:[],next:null,previous:null},isFound=!1,i=0;i<query.results.length;++i)if(query.results[i].id===data.id){var queryResult=query.results[i];query.results[i]=_objectSpread(_objectSpread({},queryResult),data),isFound=!0;break}isFound||(query.results.push(data),query.count+=1),qc.setQueryData((0,use_instacart_health_codes_fns.IK)({}),query)}})}},"./src/hooks/queries/use-instacart-health-codes-fns.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{IK:()=>getInstacartHealthcodeKey,W4:()=>fetchInstacartHealthCodes,ct:()=>USE_INSTACART_HEALTHCODE_KEY});var _home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,_home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function fetchInstacartHealthCodes(axios){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(_ref){_ref.queryKey;return axios.get("/api/v2/instacart-health-codes/",_objectSpread({},options)).then((function(x){return x.data}))}}var USE_INSTACART_HEALTHCODE_KEY="use-instacart-health-codes";function getInstacartHealthcodeKey(props){return[USE_INSTACART_HEALTHCODE_KEY,props]}},"./src/hooks/queries/use-instacart-health-codes.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L2:()=>useInstacartHealthCodes});var defineProperty=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),objectWithoutProperties=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),use_household=__webpack_require__("./src/hooks/use-household.ts"),useQuery=(__webpack_require__("./src/api-client/client-v2/api.ts"),__webpack_require__("../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs")),api_auth=__webpack_require__("./src/context/api-auth/index.ts"),use_instacart_health_codes_fns=__webpack_require__("./src/hooks/queries/use-instacart-health-codes-fns.ts"),_excluded=["enabled"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function useInstacartHealthCodes(){var _households$household,options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_useAuthenticatedAxio=(0,api_auth.rU)(),axios=_useAuthenticatedAxio.axios,isAuthenticated=_useAuthenticatedAxio.isAuthenticated,households=(0,use_household.V)(),_options$enabled=options.enabled,enabled=void 0===_options$enabled||_options$enabled,otherOptions=(0,objectWithoutProperties.A)(options,_excluded),hook=(0,useQuery.I)(function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({queryKey:(0,use_instacart_health_codes_fns.IK)({}),queryFn:(0,use_instacart_health_codes_fns.W4)(axios),enabled:enabled&&isAuthenticated&&"success"===households.status&&(null===(_households$household=households.household)||void 0===_households$household?void 0:_households$household.instacartHealthEligible),cacheTime:18e5,staleTime:1/0},otherOptions));return hook}},"./src/hooks/use-household.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{V:()=>useHousehold});var _home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),_home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),_home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/@babel/runtime/regenerator/index.js"),_home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0__),_api_client_axios__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/api-client/axios.ts"),_services_logging__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/services/logging/index.ts"),_tanstack_react_query__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),lodash__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/lodash/lodash.js"),_excluded=["data","isLoading","isError"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,_home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}_services_logging__WEBPACK_IMPORTED_MODULE_3__.v.child({module:"@/hooks/use-household"});var transformHouseholdResponse=function transformHouseholdResponse(householdV1){var _householdV1$instacar;return _objectSpread({id:householdV1.id,builtInProfilesCreated:householdV1.built_in_profiles_created,firstName:householdV1.first_name,lastActivityDate:householdV1.last_activity_date,lastName:householdV1.last_name,planDuration:householdV1.plan_duration,resourceUri:householdV1.resource_uri,sawMealPlan:householdV1.saw_meal_plan,sawProfile:householdV1.saw_profile,sawRecipeBox:householdV1.saw_recipe_box,sawRecipePage:householdV1.saw_recipe_page,sawShoppingList:householdV1.saw_shopping_list,sendDailyEmails:householdV1.send_daily_emails,sendNewsletterEmails:householdV1.send_newsletter_emails,sendPromoEmails:householdV1.send_promo_emails,sendSurveyEmails:householdV1.send_survey_emails,showBasicQuickstart:householdV1.show_basic_quickstart,showHeartcheck:householdV1.show_heartcheck,showPeapodMealKits:householdV1.show_peapod_meal_kits,showUnionLogos:householdV1.show_union_logos,status:householdV1.status,suppressDailyEmails:householdV1.suppress_daily_emails,totalPoints:householdV1.total_points,yearToDatePoints:householdV1.year_to_date_points,zip:householdV1.zip,mobilePhone:householdV1.mobile_phone,monthlyPoints:householdV1.monthly_points,standingShoppingTrip:householdV1.standing_shopping_trip,referralCode:householdV1.referral_code,instacartHealthEligible:null!==(_householdV1$instacar=householdV1.instacart_health_eligible)&&void 0!==_householdV1$instacar&&_householdV1$instacar},householdV1.last_store&&{lastStore:{id:householdV1.last_store.id,name:householdV1.last_store.name,isUnion:householdV1.last_store.is_union,priceMultiplier:householdV1.last_store.price_multiplier,recEngineId:householdV1.last_store.rec_engine_id}})},FETCH_HOUSEHOLD_KEY=["query-api-authenticated","household"];var useHousehold=function useHousehold(){var queryOptions=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_getAuthenticatedClie=(0,_api_client_axios__WEBPACK_IMPORTED_MODULE_2__.DN)(),client=_getAuthenticatedClie.client,isAuthenticated=_getAuthenticatedClie.isAuthenticated,enabled=((0,lodash__WEBPACK_IMPORTED_MODULE_4__.isNil)(queryOptions.enabled)||queryOptions.enabled)&&isAuthenticated,_useQuery=(0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_6__.I)(FETCH_HOUSEHOLD_KEY,function fetchHousehold(client){return(0,_home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__.A)(_home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0___default().mark((function _callee(){var _data$objects,_yield$client$get,data;return _home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_0___default().wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=1,client.get("/api/v1/household");case 1:if(_yield$client$get=_context.sent,null!=(data=_yield$client$get.data)&&null!==(_data$objects=data.objects)&&void 0!==_data$objects&&_data$objects[0]){_context.next=2;break}throw new Error("household is not available");case 2:return _context.abrupt("return",transformHouseholdResponse(data.objects[0]));case 3:case"end":return _context.stop()}}),_callee)})))}(client),_objectSpread(_objectSpread({staleTime:6e4},queryOptions),{},{enabled}));return _objectSpread({household:_useQuery.data,isLoading:_useQuery.isLoading,isError:_useQuery.isError},(0,_home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_7__.A)(_useQuery,_excluded))}},"./src/store/shopping-list-store.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>useShoppingListStore});var _home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,_home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var useShoppingListStore=(0,__webpack_require__("../../node_modules/zustand/esm/index.mjs").vt)((function(set,get){var defaultOptions={showAllRecipes:!1,showOtherItems:!0,showCheckedItems:!0,showEditIcon:!0,showHeartCheckProducts:!0,groceryListEmailed:!1};return{options:{},getOptions:function getOptions(tripId){return get().options[tripId]||defaultOptions},setOptions:function setOptions(tripId,options){set({options:_objectSpread(_objectSpread({},get().options),{},(0,_home_steve_projects_dinnertime_dinnertime_react_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.A)({},tripId,_objectSpread(_objectSpread(_objectSpread({},defaultOptions),get().options[tripId]),options)))})},setDeliveryStatus:function setDeliveryStatus(value){return set({deliveryStatus:value})},deliveryStatus:"unsent"}}))}}]);